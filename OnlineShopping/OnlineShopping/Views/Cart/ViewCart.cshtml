
@{
    ViewBag.Title = "ViewCart";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/Content/MyTemplate/css/cart.css" rel="stylesheet" type="text/css" media="all" />

</div>

@using Model.Models;
@using Model.DAL;
@{
    List<Product_Cart> cartItems = (List<Product_Cart>)Session["CART"];
    User_Account userAccount = (User_Account)Session["USER"];
    if (userAccount != null)
    {
        cartItems = userAccount.Product_Cart.ToList<Product_Cart>();
    }
    float totalPrice = 0;
}

<div class="cart-content">
    <div class="cart-items">
        @*list items header*@
        <div class="item-detail cart-header">
            <div class="item-image">
                <p>
                    Image
                </p>
            </div>
            <div class="item-name">
                <p>
                    Your Cart (10 Products)
                </p>
            </div>
            <div class="item-price">
                <p>
                    Price Per Unit
                </p>
            </div>
            <div class="item-quantity">
                <p>
                    Quantity
                </p>
            </div>
            <div class="item-total-price">
                <p>
                    Price
                </p>
            </div>
            <div class="item-delete">
                <p>Delete</p>
            </div>
        </div>
        @*begin list items*@
        @if ((cartItems == null) || (cartItems.Count == 0))
        {
            <p>Your cart have no items</p>
        }
        else
        {
            foreach (Product_Cart item in cartItems)
            {
                <div class="item-detail">
                    <div class="item-image">
                        <img src="@Url.Content(item.Product.Title_Image)" height="100%" />
                    </div>
                    <div class="item-name">
                        <p>
                            @item.Product.Product_Name
                        </p>
                    </div>
                    <div class="item-price">
                        <p>
                            @item.Product.Price
                        </p>
                    </div>
                    <div class="item-quantity">
                        <p>
                            @item.Quantity
                        </p>
                    </div>
                    <div class="item-total-price">
                        <p>
                            @(item.Quantity * item.Product.Price)
                            @{ totalPrice += (float)(item.Quantity * item.Product.Price);}
                        </p>
                    </div>

                    <div class="item-delete">
                        @using (Html.BeginForm("Delete", "Cart"))
                        {
                            <input type="hidden" value="@item.Product_ID" name="productId" />
                            <button type="submit">Delete</button>
                        }
                    </div>
                </div>
                                    }
                                }

        @*begin list items*@
    </div>
    <div class="checkout-cart">
        <p>
            Total Price: @totalPrice $
        </p>
        @using (Html.BeginForm("Index", "Province"))
        {
            <button type="submit">PROCEED TO CHECKOUT</button>
        }

    </div>

</div>
